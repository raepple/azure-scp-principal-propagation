---
applications:
- name: ((APP_NAME))
  memory: 1500M
  routes:
    - route: ((APP_NAME))-((ID)).((LANDSCAPE_APPS_DOMAIN))
  timeout: 300
  random-route: true
  path: application/target/((APP_NAME))-application.war
  buildpacks:
    - sap_java_buildpack
  env:
    TARGET_RUNTIME: tomee7
    SET_LOGGING_LEVEL: '{ROOT: INFO, com.sap.cloud.sdk: INFO}'
    JBP_CONFIG_SAPJVM_MEMORY_SIZES: 'metaspace:128m..'
    AAD_DEMOAPP_CLIENT_ID: ((AAD_DEMOAPP_CLIENT_ID))
    AAD_IASAPP_CLIENT_ID: ((AAD_IASAPP_CLIENT_ID))
  services:
    - name: ias-((APP_NAME))
      parameters: { "credential-type": "SECRET" }
    - name: destination-((APP_NAME))
- name: approuter-((APP_NAME))
  routes:
    - route: approuter-((APP_NAME))-((ID)).((LANDSCAPE_APPS_DOMAIN))
  path: approuter
  memory: 128M
  buildpacks:
    - nodejs_buildpack
  env:
    destinations: '[{"name":"app-destination", "url":"https://((APP_NAME))-((ID)).((LANDSCAPE_APPS_DOMAIN))", "forwardAuthToken": true}]'
  services:
    - ias-((APP_NAME))